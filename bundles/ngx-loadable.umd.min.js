!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/common"),require("@angular/router")):"function"==typeof define&&define.amd?define("ngx-loadable",["exports","@angular/core","@angular/common","@angular/router"],t):t((e=e||self)["ngx-loadable"]={},e.ng.core,e.ng.common,e.ng.router)}(this,function(e,t,o,n){"use strict";function r(e,t){var o,n,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}var i=new t.InjectionToken("LOADABLE_CONFIG"),a=new t.InjectionToken("LOADABLE_ROOT_OPTIONS"),l=function(){function e(e,t,o){this.loader=e,this.cfr=t,this.compiler=o,this.modules=[]}return e.prototype.addConfig=function(e){var t=this;e.forEach(function(e){t.getModule(e.name).loadChildren?console.warn("ngx-loadable - ModuleConfig with name '"+e.name+"' was previously added, it will not be added multiple times, continue..."):(t.modules.push(e),e.preload&&t.preload(e.name))})},e.prototype.getModule=function(e){return this.modules.find(function(t){return t.name===e})||{}},e.prototype.getModulePath=function(e){return this.getModule(e).loadChildren},e.prototype.preload=function(e){var o=this,n=this.getModulePath(e);return"string"==typeof n?this.loader.load(n):n().then(function(e){return e instanceof t.NgModuleFactory?e:o.compiler.compileModuleAsync(e)})},e.prototype.preloadAll=function(e){var t=this;return e||(e=this.modules.map(function(e){return e.name})),Promise.all(e.map(function(e){return t.preload(e)}))},e.prototype._renderVCR=function(e,o,n){var r;if(e){if(e instanceof t.TemplateRef)return o.remove(),o.createEmbeddedView(e);if(e.componentFactoryResolver){var i=e._bootstrapComponents[0];r=e.componentFactoryResolver.resolveComponentFactory(i)}else r=this.cfr.resolveComponentFactory(e);if(o.remove(),n){var a=n.get(0);a&&a.rootNodes&&a.rootNodes[0]&&a.rootNodes[0].classList.add("is-disappearing"),setTimeout(function(){n.remove();var e=n.get(0);e&&e.rootNodes&&e.rootNodes[0]&&e.rootNodes[0].classList.add("is-visible")},1e3)}return o.createComponent(r)}},e.decorators=[{type:t.Injectable,args:[{providedIn:"root"}]}],e.ctorParameters=function(){return[{type:t.NgModuleFactoryLoader},{type:t.ComponentFactoryResolver},{type:t.Compiler}]},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e(t.ɵɵinject(t.NgModuleFactoryLoader),t.ɵɵinject(t.ComponentFactoryResolver),t.ɵɵinject(t.Compiler))},token:e,providedIn:"root"}),e}(),s=function(){function e(e,o,n,r){this.options=e,this.loadable=o,this.elementRef=n,this.injector=r,this.show=!1,this.init=new t.EventEmitter,this.loading=!1,this.loaded=!1,this.error=!1}return e.prototype.ngOnChanges=function(e){if(e.show&&e.show.currentValue){if(this.loaded)return void this._render();this.loadFn()}},e.prototype.preload=function(){return e=this,t=void 0,n=function(){var e,t;return r(this,function(o){switch(o.label){case 0:if(!this.module)return[2];o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.loadable.preload(this.module)];case 2:return e=o.sent(),this.loaded=!0,this.timedOut=!1,this.moduleRef=e.create(this.injector),[2,e];case 3:return t=o.sent(),this.error=t,this.loadable._renderVCR(this.errorTemplate||this.loadable.getModule(this.module).errorComponent||this.options.errorComponent,this.content),[2,t];case 4:return[2]}})},new((o=void 0)||(o=Promise))(function(r,i){function a(e){try{s(n.next(e))}catch(e){i(e)}}function l(e){try{s(n.throw(e))}catch(e){i(e)}}function s(e){e.done?r(e.value):new o(function(t){t(e.value)}).then(a,l)}s((n=n.apply(e,t||[])).next())});var e,t,o,n},e.prototype._render=function(){var e=this.loadable.getModule(this.module);if(this.isElement||e.isElement||this.options.isElement){var t=document.createElement(e.name);return this.init.next({instance:t}),this.elementRef.nativeElement.appendChild(t),void(this.loading=!1)}var o=this.loadable._renderVCR(this.moduleRef,this.content,this.placeholder);this.init.next(o),this.loading=!1},e.prototype.reload=function(){this.timedOut=!1,this.error=void 0,this.loadFn()},e.prototype._renderTimeoutTemplate=function(){this.timedOut=!0,this.loadable._renderVCR(this.timeoutTemplate||this.loadable.getModule(this.module).timeoutTemplate||this.options.timeoutTemplate,this.content)},e.prototype.loadFn=function(){var e=this;"string"==typeof this.timeout&&(this.timeout=parseInt(this.timeout,10)),this.loading=!0,this.loadable._renderVCR(this.loadingTemplate||this.loadable.getModule(this.module).loadingComponent||this.options.loadingComponent,this.placeholder),0===this.timeout?this._renderTimeoutTemplate():this.timeout>0&&(this.timeoutRef=setTimeout(function(){e._renderTimeoutTemplate()},this.timeout)),this.preload().then(function(t){e.timeoutRef&&clearTimeout(e.timeoutRef),t instanceof Error||(e.loading=!1,e._render())})},e.decorators=[{type:t.Component,args:[{selector:"ngx-loadable",template:"\n    <ng-template #content></ng-template>\n    <ng-template #placeholder></ng-template>\n  "}]}],e.ctorParameters=function(){return[{type:void 0,decorators:[{type:t.Optional},{type:t.Inject,args:[a]}]},{type:l},{type:t.ElementRef},{type:t.Injector}]},e.propDecorators={module:[{type:t.Input}],show:[{type:t.Input}],timeout:[{type:t.Input}],isElement:[{type:t.Input}],init:[{type:t.Output}],content:[{type:t.ViewChild,args:["content",{read:t.ViewContainerRef,static:!0}]}],placeholder:[{type:t.ViewChild,args:["placeholder",{read:t.ViewContainerRef,static:!0}]}],loadingTemplate:[{type:t.ContentChild,args:["loading",{read:t.TemplateRef,static:!1}]}],errorTemplate:[{type:t.ContentChild,args:["error",{read:t.TemplateRef,static:!1}]}],timeoutTemplate:[{type:t.ContentChild,args:["timedOut",{read:t.TemplateRef,static:!1}]}]},e}(),u=function(){function e(e,t){void 0===t&&(t=[]),t&&e.addConfig(t[t.length-1])}return e.forRoot=function(o){return void 0===o&&(o={}),{ngModule:e,providers:[{provide:i,useValue:{},multi:!0,deps:[l]},{provide:i,useValue:o.moduleConfigs,multi:!0},{provide:a,useValue:o.rootOptions||{}},{provide:t.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:o,multi:!0},n.provideRoutes(o.moduleConfigs)]}},e.forFeature=function(o){return void 0===o&&(o={}),{ngModule:e,providers:[{provide:i,useValue:{},multi:!0,deps:[l]},{provide:i,useValue:o.moduleConfigs,multi:!0},{provide:t.ANALYZE_FOR_ENTRY_COMPONENTS,useValue:o,multi:!0},n.provideRoutes(o.moduleConfigs)]}},e.decorators=[{type:t.NgModule,args:[{declarations:[s],imports:[o.CommonModule],providers:[{provide:t.NgModuleFactoryLoader,useClass:t.SystemJsNgModuleLoader}],exports:[s]}]}],e.ctorParameters=function(){return[{type:l},{type:Array,decorators:[{type:t.Optional},{type:t.Inject,args:[i]}]}]},e}();e.LOADABLE_CONFIG=i,e.LOADABLE_ROOT_OPTIONS=a,e.LoadableComponent=s,e.LoadableModule=u,e.LoadableService=l,e.matcher=function(){return null},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=ngx-loadable.umd.min.js.map